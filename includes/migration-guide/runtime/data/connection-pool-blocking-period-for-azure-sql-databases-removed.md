### <a name="connection-pool-blocking-period-for-azure-sql-databases-is-removed"></a><span data-ttu-id="c3e1d-101">Viene rimosso il pool di connessioni blocco periodo per i database SQL di Azure</span><span class="sxs-lookup"><span data-stu-id="c3e1d-101">Connection pool blocking period for Azure SQL databases is removed</span></span>

|   |   |
|---|---|
|<span data-ttu-id="c3e1d-102">Dettagli</span><span class="sxs-lookup"><span data-stu-id="c3e1d-102">Details</span></span>|<span data-ttu-id="c3e1d-103">A partire da .NET Framework 4.6.2, aprire le richieste ai database SQL di Azure noti per la connessione (*. database.windows.net, *. database.chinacloudapi.cn, *. database.usgovcloudapi.net, *. database.cloudapi.de), il pool di connessioni è il periodo di blocco rimosso, e gli errori di apertura connessione non vengono memorizzate nella cache.</span><span class="sxs-lookup"><span data-stu-id="c3e1d-103">Starting with the .NET Framework 4.6.2, for connection open requests to known Azure SQL databases (*.database.windows.net, *.database.chinacloudapi.cn, *.database.usgovcloudapi.net, *.database.cloudapi.de), the connection pool blocking period is removed, and connection open errors are not cached.</span></span> <span data-ttu-id="c3e1d-104">Dopo gli errori di connessione del transiente, verranno effettuati tentativi quasi istantanei per ripetere le richieste di connessione aperte.</span><span class="sxs-lookup"><span data-stu-id="c3e1d-104">Attempts to retry connection open requests will occur almost immediately after transient connection errors.</span></span> <span data-ttu-id="c3e1d-105">Questa modifica consente il tentativo di connessione aperta a rieseguita immediatamente per i database SQL di Azure, migliorando le prestazioni delle App cloud-abilitato.</span><span class="sxs-lookup"><span data-stu-id="c3e1d-105">This change allows the connection open attempt to be retried immediately for Azure SQL databases, thereby improving the performance of cloud- enabled apps.</span></span> <span data-ttu-id="c3e1d-106">Per tutti gli altri tentativi di connessione, il periodo di blocco di pool di connessione continua a essere applicata. In .NET Framework 4.6.1 e versioni precedenti, quando un'app si verifica un errore di connessione temporanei durante la connessione a un database, il tentativo di connessione non può essere ritentato rapidamente, perché il pool di connessioni vengono memorizzati nella cache l'errore e genera nuovamente per 5 secondi a 1 minuti.</span><span class="sxs-lookup"><span data-stu-id="c3e1d-106">For all other connection attempts, the connection pool blocking period continues to be enforced.In the .NET Framework 4.6.1 and earlier versions, when an app encounters a transient connection failure when connecting to a database, the connection attempt cannot be retried quickly, because the connection pool caches the error and re-throws it for 5 seconds to 1 minute.</span></span> <span data-ttu-id="c3e1d-107">Per ulteriori informazioni, vedere [SQL Server Connection Pooling (ADO.NET)](~/docs/framework/data/adonet/sql-server-connection-pooling.md).</span><span class="sxs-lookup"><span data-stu-id="c3e1d-107">For more information, see [SQL Server Connection Pooling (ADO.NET)](~/docs/framework/data/adonet/sql-server-connection-pooling.md).</span></span> <span data-ttu-id="c3e1d-108">Questo comportamento può causare problemi con le connessioni a database SQL di Azure, che spesso hanno esito negativo in caso di errori temporanei che vengono generalmente ripristinati nell'arco di pochi secondi.</span><span class="sxs-lookup"><span data-stu-id="c3e1d-108">This behavior is problematic for connections to Azure SQL databases, which often fail with transient errors that are typically recovered from within a few seconds.</span></span> <span data-ttu-id="c3e1d-109">La funzionalità che causano il blocco del pool di connessione significa che l'app non può connettersi al database per un periodo esteso, anche se il database sia disponibile e che l'app deve eseguire il rendering entro pochi secondi.</span><span class="sxs-lookup"><span data-stu-id="c3e1d-109">The connection pool blocking feature means that the app cannot connect to the database for an extensive period, even though the database is available and the app needs to render within a few seconds.</span></span>|
|<span data-ttu-id="c3e1d-110">Suggerimento</span><span class="sxs-lookup"><span data-stu-id="c3e1d-110">Suggestion</span></span>|<span data-ttu-id="c3e1d-111">Se questo comportamento è indesiderato, il periodo di blocco di pool di connessione può essere configurato impostando la <xref:System.Data.SqlClient.SqlConnectionStringBuilder.PoolBlockingPeriod?displayProperty=name> proprietà introdotta in .NET Framework 4.6.2.</span><span class="sxs-lookup"><span data-stu-id="c3e1d-111">If this behavior is undesirable, the connection pool blocking period can be configured by setting the <xref:System.Data.SqlClient.SqlConnectionStringBuilder.PoolBlockingPeriod?displayProperty=name> property introduced in the .NET Framework 4.6.2.</span></span> <span data-ttu-id="c3e1d-112">Il valore della proprietà è un membro dell'enumerazione <xref:System.Data.SqlClient.PoolBlockingPeriod?displayProperty=name> che può assumere uno dei tre valori seguenti:</span><span class="sxs-lookup"><span data-stu-id="c3e1d-112">The value of the property is a member of the <xref:System.Data.SqlClient.PoolBlockingPeriod?displayProperty=name> enumeration that can take either of three values:</span></span><ul><li><xref:System.Data.SqlClient.PoolBlockingPeriod.AlwaysBlock></li><li><xref:System.Data.SqlClient.PoolBlockingPeriod.Auto></li><li><xref:System.Data.SqlClient.PoolBlockingPeriod.NeverBlock></li></ul><span data-ttu-id="c3e1d-113">È possibile ripristinare il comportamento precedente impostando la proprietà <xref:System.Data.SqlClient.SqlConnectionStringBuilder.PoolBlockingPeriod?displayProperty=name> su <xref:System.Data.SqlClient.PoolBlockingPeriod.AlwaysBlock>.</span><span class="sxs-lookup"><span data-stu-id="c3e1d-113">The previous behavior can be restored by setting the <xref:System.Data.SqlClient.SqlConnectionStringBuilder.PoolBlockingPeriod?displayProperty=name> property to <xref:System.Data.SqlClient.PoolBlockingPeriod.AlwaysBlock>.</span></span>|
|<span data-ttu-id="c3e1d-114">Ambito</span><span class="sxs-lookup"><span data-stu-id="c3e1d-114">Scope</span></span>|<span data-ttu-id="c3e1d-115">Secondario</span><span class="sxs-lookup"><span data-stu-id="c3e1d-115">Minor</span></span>|
|<span data-ttu-id="c3e1d-116">Versione</span><span class="sxs-lookup"><span data-stu-id="c3e1d-116">Version</span></span>|<span data-ttu-id="c3e1d-117">4.6.2</span><span class="sxs-lookup"><span data-stu-id="c3e1d-117">4.6.2</span></span>|
|<span data-ttu-id="c3e1d-118">Tipo</span><span class="sxs-lookup"><span data-stu-id="c3e1d-118">Type</span></span>|<span data-ttu-id="c3e1d-119">Runtime</span><span class="sxs-lookup"><span data-stu-id="c3e1d-119">Runtime</span></span>|
|<span data-ttu-id="c3e1d-120">API interessate</span><span class="sxs-lookup"><span data-stu-id="c3e1d-120">Affected APIs</span></span>|<ul><li><xref:System.Data.Common.DbConnection.OpenAsync?displayProperty=nameWithType></li><li><xref:System.Data.SqlClient.SqlConnection.Open?displayProperty=nameWithType></li><li><xref:System.Data.SqlClient.SqlConnection.OpenAsync(System.Threading.CancellationToken)?displayProperty=nameWithType></li></ul>|

