### <a name="connection-pool-blocking-period-for-azure-sql-databases-is-removed"></a>Viene rimosso il pool di connessioni blocco periodo per i database SQL di Azure

|   |   |
|---|---|
|Dettagli|A partire da .NET Framework 4.6.2, aprire le richieste ai database SQL di Azure noti per la connessione (*. database.windows.net, *. database.chinacloudapi.cn, *. database.usgovcloudapi.net, *. database.cloudapi.de), il pool di connessioni è il periodo di blocco rimosso, e gli errori di apertura connessione non vengono memorizzate nella cache. Dopo gli errori di connessione del transiente, verranno effettuati tentativi quasi istantanei per ripetere le richieste di connessione aperte. Questa modifica consente il tentativo di connessione aperta a rieseguita immediatamente per i database SQL di Azure, migliorando le prestazioni delle App cloud-abilitato. Per tutti gli altri tentativi di connessione, il periodo di blocco di pool di connessione continua a essere applicata. In .NET Framework 4.6.1 e versioni precedenti, quando un'app si verifica un errore di connessione temporanei durante la connessione a un database, il tentativo di connessione non può essere ritentato rapidamente, perché il pool di connessioni vengono memorizzati nella cache l'errore e genera nuovamente per 5 secondi a 1 minuti. Per ulteriori informazioni, vedere [SQL Server Connection Pooling (ADO.NET)](~/docs/framework/data/adonet/sql-server-connection-pooling.md). Questo comportamento può causare problemi con le connessioni a database SQL di Azure, che spesso hanno esito negativo in caso di errori temporanei che vengono generalmente ripristinati nell'arco di pochi secondi. La funzionalità che causano il blocco del pool di connessione significa che l'app non può connettersi al database per un periodo esteso, anche se il database sia disponibile e che l'app deve eseguire il rendering entro pochi secondi.|
|Suggerimento|Se questo comportamento è indesiderato, il periodo di blocco di pool di connessione può essere configurato impostando la <xref:System.Data.SqlClient.SqlConnectionStringBuilder.PoolBlockingPeriod?displayProperty=name> proprietà introdotta in .NET Framework 4.6.2. Il valore della proprietà è un membro dell'enumerazione <xref:System.Data.SqlClient.PoolBlockingPeriod?displayProperty=name> che può assumere uno dei tre valori seguenti:<ul><li><xref:System.Data.SqlClient.PoolBlockingPeriod.AlwaysBlock></li><li><xref:System.Data.SqlClient.PoolBlockingPeriod.Auto></li><li><xref:System.Data.SqlClient.PoolBlockingPeriod.NeverBlock></li></ul>È possibile ripristinare il comportamento precedente impostando la proprietà <xref:System.Data.SqlClient.SqlConnectionStringBuilder.PoolBlockingPeriod?displayProperty=name> su <xref:System.Data.SqlClient.PoolBlockingPeriod.AlwaysBlock>.|
|Ambito|Secondario|
|Versione|4.6.2|
|Tipo|Runtime|
|API interessate|<ul><li><xref:System.Data.Common.DbConnection.OpenAsync?displayProperty=nameWithType></li><li><xref:System.Data.SqlClient.SqlConnection.Open?displayProperty=nameWithType></li><li><xref:System.Data.SqlClient.SqlConnection.OpenAsync(System.Threading.CancellationToken)?displayProperty=nameWithType></li></ul>|

