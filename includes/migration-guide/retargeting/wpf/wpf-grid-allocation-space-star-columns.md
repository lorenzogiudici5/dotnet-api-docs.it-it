### <a name="wpf-grid-allocation-of-space-to-star-columns"></a>Allocazione di griglia di WPF di spazio per le colonne a stella

|   |   |
|---|---|
|Dettagli|A partire da 4.7 il Framework .NET, WPF sostituisce l'algoritmo che <xref:System.Windows.Controls.Grid> per allocare spazio per *-colonne. Verrà modificato l'effettiva larghezza assegnata a *-le colonne in un numero di case:<ul><li>Quando uno o più *-colonne hanno anche una larghezza minima o massima che esegue l'override l'allocazione proporzionale per tale colonna. (La larghezza minima possibile derivare da una dichiarazione esplicita MinWidth o da un minimo implicito ottenuto dal contenuto della colonna. La larghezza massima può essere definita solo in modo esplicito, da una dichiarazione MaxWidth.)</li><li>Quando uno o più *-colonne dichiarare un estremamente grandi *-peso, maggiore di 10 ^ 298.</li><li>Quando il *-i pesi sono sufficientemente diversi che si verifichino instabilità a virgola mobile (overflow, underflow, perdita di precisione).</li><li>Quando è abilitato l'arrotondamento del layout e il DPI effettivamente visualizzato è sufficientemente elevato.</li></ul>Nei primi due casi, le larghezze prodotte dal nuovo algoritmo possono essere significativamente diverse da quelli generati dall'algoritmo precedente; Nell'ultimo caso, la differenza sarà al massimo uno o due pixel. Il nuovo algoritmo corregge diversi bug presente nell'algoritmo precedente:<ol><li>L'allocazione totale alle colonne può superare la larghezza della griglia. Ciò può verificarsi quando si alloca spazio a una colonna la cui quota proporzionale è minore rispetto alle dimensioni minime. L'algoritmo alloca le dimensioni minime, riducendo lo spazio disponibile per le altre colonne. Se non esistono alcun *-le colonne a sinistra per allocare, l'allocazione totale saranno troppo grande.</li><li>L'allocazione totale può non raggiungere la larghezza della griglia. Questo è il problema doppio a #1, quando si allocare a una colonna la cui quota proporzionale è maggiore rispetto alle relative dimensioni massime, senza alcun *-le colonne da sinistra per sfruttare la flessibilità.</li><li>Due *-colonne possono ricevere le allocazioni ma non proporzionale al loro *-pesi. Questa è una versione più lieve di #1/#2, che si verifica durante l'allocazione alle colonne * A, B e C (in questo ordine), dove la quota proporzionale di B viola il suo vincolo min o max. Come in precedenza, lo spazio disponibile alla colonna C si riduce e questa ottiene un'allocazione proporzionale inferiore o superiore rispetto ad A,</li><li>Le colonne con i pesi molto elevati (&gt; 10 ^ 298) vengono tutti trattati come se includessero peso 10 ^ 298. Le differenze proporzionali tra di esse (e tra le colonne con pesi leggermente inferiori) non vengono rispettate.</li><li>Le colonne con i pesi inifinte non vengono gestite correttamente. [In realtà non è possibile impostare un peso su infinito, ma si tratta di una limitazione artificiale. Il codice di allocazione stava tentando di gestirlo, ma in un processo non valido.]</li><li>Diversi problemi minori mentre si evita l'overflow, l'underflow, la perdita di precisione e altri problemi analoghi della virgola mobile.</li><li>Le modifiche per l'arrotondamento del layout con un DPI sufficientemente elevato non sono corrette.</li></ol>Il nuovo algoritmo produce risultati che soddisfano i criteri seguenti: valore. L'effettiva larghezza assegnata a un *-colonna non è mai minore larghezza minima né maggiore della larghezza massima. B. Ogni <em>-colonna che non è assegnato il minimo o larghezza massima è assegnata una larghezza proporzionale al relativo <em>-peso. Precisa, se vengono dichiarate due colonne con larghezza x</em> e y</em> rispettivamente, e, se nessuna delle colonne riceve la larghezza minima o massima, la larghezza effettiva v e w assegnati alle colonne siano nella stessa proporzione: v / w = = x / y.C. La larghezza totale allocata a &quot;proporzionale&quot; *-colonne è uguale per lo spazio disponibile dopo aver allocato alle colonne vincolate (fisso, auto, e *-le colonne che vengono allocate alla larghezza min o max). Potrebbe trattarsi di zero, ad esempio se la somma delle larghezze minime supera la larghezza availbable della griglia. D. Tutte queste istruzioni devono essere interpretati in relazione ai &quot;ideale&quot; layout. Quando l'arrotondamento del layout è attiva, la larghezza effettiva può differire dalla larghezza ideale tanto quanto un pixel. L'algoritmo precedente rispettata (A) ma non è riuscita rispettare gli altri criteri nei casi descritti in precedenza. Tutti gli elementi nelle colonne e larghezza delle colonne in questo articolo si applica anche a righe e altezze.|
|Suggerimento|Per impostazione predefinita, le app che destinate alle versioni di .NET Framework a partire da 4.7 il Framework .NET verrà visualizzati il nuovo algoritmo, mentre le app che destinati a .NET Framework 4.6.2 o versioni precedenti verranno visualizzati l'algoritmo precedente. Per ignorare il valore predefinito, utilizzare l'impostazione di configurazione seguente:<pre><code class="language-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Windows.Controls.Grid.StarDefinitionsCanExceedAvailableSpace=true&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre>Il valore 'true' seleziona l'algoritmo precedente, 'false' consente di selezionare il nuovo algoritmo.|
|Ambito|Secondario|
|Versione|4.7|
|Tipo|Ridestinazione|

