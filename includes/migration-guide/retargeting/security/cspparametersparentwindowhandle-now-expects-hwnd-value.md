### <a name="cspparametersparentwindowhandle-now-expects-hwnd-value"></a><span data-ttu-id="c64c7-101">CspParameters.ParentWindowHandle prevede ora il valore HWND</span><span class="sxs-lookup"><span data-stu-id="c64c7-101">CspParameters.ParentWindowHandle now expects HWND value</span></span>

|   |   |
|---|---|
|<span data-ttu-id="c64c7-102">Dettagli</span><span class="sxs-lookup"><span data-stu-id="c64c7-102">Details</span></span>|<span data-ttu-id="c64c7-103">Il <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> valore, introdotta in .NET Framework 2.0, è possibile registrare un valore di handle di finestra padre in modo che qualsiasi interfaccia utente necessarie per accedere alla chiave (ad esempio un PIN richiedere o finestra di dialogo di consenso) viene visualizzata come elemento figlio modale la finestra specificata. Partire dalle App destinate a 4.7 il Framework .NET, un'applicazione Windows Forms possa impostare il <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> proprietà con codice simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="c64c7-103">The <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> value, introduced in .NET Framework 2.0, allows an application to register a parent window handle value such that any UI required to access the key (such as a PIN prompt or consent dialog) opens as a modal child to the specified window.Starting with apps that target the .NET Framework 4.7, a Windows Forms application can set the <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> property with code like the following:</span></span><pre><code class="language-C#">cspParameters.ParentWindowHandle = form.Handle;&#13;&#10;</code></pre><span data-ttu-id="c64c7-104">Nelle versioni precedenti di .NET Framework, il valore dovrebbe essere un' <xref:System.IntPtr?displayProperty=name> che rappresenta una posizione in memoria in cui la [HWND](https://msdn.microsoft.com/library/windows/desktop/aa383751.aspx#HWND) valore si trovava.</span><span class="sxs-lookup"><span data-stu-id="c64c7-104">In previous versions of the .NET Framework, the value was expected to be an <xref:System.IntPtr?displayProperty=name> representing a location in memory where the [HWND](https://msdn.microsoft.com/library/windows/desktop/aa383751.aspx#HWND) value resided.</span></span> <span data-ttu-id="c64c7-105">Impostazione della proprietà al form. Gestire in Windows 7 e versioni precedenti non aveva alcun effetto, ma in Windows 8 e versioni successive, il risultato è un &quot; <xref:System.Security.Cryptography.CryptographicException?displayProperty=name>: parametro non corretto.&quot;</span><span class="sxs-lookup"><span data-stu-id="c64c7-105">Setting the property to form.Handle on Windows 7 and earlier versions had no effect, but on Windows 8 and later versions, it results in a &quot;<xref:System.Security.Cryptography.CryptographicException?displayProperty=name>: The parameter is incorrect.&quot;</span></span>|
|<span data-ttu-id="c64c7-106">Suggerimento</span><span class="sxs-lookup"><span data-stu-id="c64c7-106">Suggestion</span></span>|<span data-ttu-id="c64c7-107">Le applicazioni destinato a .NET 4.7 o versioni successive che desiderano registrare una relazione di finestra padre sono incoraggiate a utilizzare la forma semplificata:</span><span class="sxs-lookup"><span data-stu-id="c64c7-107">Applications targeting .NET 4.7 or higher wishing to register a parent window relationship are encouraged to use the simplified form:</span></span><pre><code class="language-C#">cspParameters.ParentWindowHandle = form.Handle;&#13;&#10;</code></pre><span data-ttu-id="c64c7-108">Gli utenti che avevano individuato che il valore corretto da passare è l'indirizzo di una posizione di memoria che il valore di assegnata <code>form.Handle</code> possono rifiutare esplicitamente la modifica del comportamento impostando l'opzione di AppContext <code>Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle</code> a <code>true</code>.</span><span class="sxs-lookup"><span data-stu-id="c64c7-108">Users who had identified that the correct value to pass was the address of a memory location which held the value <code>form.Handle</code> can opt out of the behavior change by setting the AppContext switch <code>Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle</code> to <code>true</code>.</span></span><ol><li><span data-ttu-id="c64c7-109">Impostando a livello di programmazione compat interruttori di AppContext, come spiegato [qui](http://blogs.msdn.com/b/dotnet/archive/2015/04/29/net-announcements-at-build-2015.aspx#dotnet46)</span><span class="sxs-lookup"><span data-stu-id="c64c7-109">By programmatically setting compat switches on the AppContext, as explained [here](http://blogs.msdn.com/b/dotnet/archive/2015/04/29/net-announcements-at-build-2015.aspx#dotnet46)</span></span></li><li><span data-ttu-id="c64c7-110">Aggiungendo la riga seguente alla sezione <code>&lt;runtime&gt;</code> del file app.config:</span><span class="sxs-lookup"><span data-stu-id="c64c7-110">By adding the following line to the <code>&lt;runtime&gt;</code> section of the app.config file:</span></span></li></ol><pre><code class="language-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle=true&quot;/&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre><span data-ttu-id="c64c7-111">Al contrario, gli utenti che desiderano optare per il nuovo comportamento nel runtime di .NET Framework 4.7 quando i carichi di lavoro con le versioni precedenti di .NET Framework è possibile impostare il AppContext passare <code>false</code>.</span><span class="sxs-lookup"><span data-stu-id="c64c7-111">Conversely, users who wish to opt in to the new behavior on the .NET Framework 4.7 runtime when the application loads under older .NET Framework versions can set the AppContext switch to <code>false</code>.</span></span>|
|<span data-ttu-id="c64c7-112">Ambito</span><span class="sxs-lookup"><span data-stu-id="c64c7-112">Scope</span></span>|<span data-ttu-id="c64c7-113">Secondario</span><span class="sxs-lookup"><span data-stu-id="c64c7-113">Minor</span></span>|
|<span data-ttu-id="c64c7-114">Versione</span><span class="sxs-lookup"><span data-stu-id="c64c7-114">Version</span></span>|<span data-ttu-id="c64c7-115">4.7</span><span class="sxs-lookup"><span data-stu-id="c64c7-115">4.7</span></span>|
|<span data-ttu-id="c64c7-116">Tipo</span><span class="sxs-lookup"><span data-stu-id="c64c7-116">Type</span></span>|<span data-ttu-id="c64c7-117">Ridestinazione</span><span class="sxs-lookup"><span data-stu-id="c64c7-117">Retargeting</span></span>|
|<span data-ttu-id="c64c7-118">API interessate</span><span class="sxs-lookup"><span data-stu-id="c64c7-118">Affected APIs</span></span>|<ul><li><xref:System.Security.Cryptography.CspParameters.ParentWindowHandle?displayProperty=nameWithType></li></ul>|

