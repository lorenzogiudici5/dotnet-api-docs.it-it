### <a name="currentculture-and-currentuiculture-flow-across-tasks"></a>CurrentCulture e CurrentUICulture vengono disposti dall'attività

|   |   |
|---|---|
|Dettagli|A partire da .NET Framework 4.6 <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> e <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> vengono archiviati nel thread <xref:System.Threading.ExecutionContext?displayProperty=name>, che passano attraverso le operazioni asincrone. Ciò significa che le modifiche apportate a <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> o <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> verranno riflesse nelle attività che vengono eseguite in un secondo momento in modo asincrono. Ciò è diverso dal comportamento di versioni precedenti di .NET Framework (che sarebbe reimpostare <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> e <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> in tutte le attività asincrone).|
|Suggerimento|Questa modifica interessate le app possono aggirare il problema in modo esplicito l'impostazione desiderata <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> o <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> come prima operazione in un'attività asincrona. In alternativa, il comportamento precedente (di non scorrono <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> / <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name>) può essere scelto di impostando l'opzione di compatibilità seguenti:<pre><code class="language-C#">AppContext.SetSwitch(&quot;Switch.System.Globalization.NoAsyncCurrentCulture&quot;, true);&#13;&#10;</code></pre>Questo problema è stato risolto in WPF in .NET Framework 4.6.2. È stato risolto anche in .NET Framework 4.6, 4.6.1 attraverso [3139549 KB](https://support.microsoft.com/kb/3139549). Applicazioni destinate a .NET 4.6 o versione successiva verranno automaticamente visualizzato il comportamento corretto nelle applicazioni WPF - <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> / <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name>) potrebbe essere preservato in tutte le operazioni del Dispatcher.|
|Ambito|Secondario|
|Versione|4.6|
|Tipo|Ridestinazione|
|API interessate|<ul><li><xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=nameWithType></li><li><xref:System.Threading.Thread.CurrentCulture?displayProperty=nameWithType></li><li><xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=nameWithType></li><li><xref:System.Threading.Thread.CurrentUICulture?displayProperty=nameWithType></li></ul>|

