<span data-ttu-id="9bebd-101">Utilizzando basati su caratteri l'indicizzazione con il <xref:System.Text.StringBuilder.Chars%2A> proprietà può essere molto lenta nelle condizioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="9bebd-101">Using character-based indexing with the <xref:System.Text.StringBuilder.Chars%2A> property can be extremely slow under the following conditions:</span></span>

- <span data-ttu-id="9bebd-102">Il <xref:System.Text.StringBuilder> istanza è di grandi dimensioni (ad esempio, è costituito da diverse decine di migliaia di caratteri).</span><span class="sxs-lookup"><span data-stu-id="9bebd-102">The <xref:System.Text.StringBuilder> instance is large (for example, it consists of several tens of thousands of characters).</span></span>
- <span data-ttu-id="9bebd-103">Il <xref:System.Text.StringBuilder> è "voluminosi".</span><span class="sxs-lookup"><span data-stu-id="9bebd-103">The <xref:System.Text.StringBuilder> is "chunky."</span></span> <span data-ttu-id="9bebd-104">Vale a dire, chiamate ripetute a metodi, ad esempio <xref:System.Text.StringBuilder.Append%2A?displayProperty=nameWithType> espansi automaticamente l'oggetto <xref:System.Text.StringBuilder.Capacity%2A?displayProperty=nameWithType> proprietà e allocati nuovi blocchi di memoria a esso.</span><span class="sxs-lookup"><span data-stu-id="9bebd-104">That is, repeated calls to methods such as <xref:System.Text.StringBuilder.Append%2A?displayProperty=nameWithType> have automatically expanded the object's <xref:System.Text.StringBuilder.Capacity%2A?displayProperty=nameWithType> property and allocated new chunks of memory to it.</span></span>

<span data-ttu-id="9bebd-105">Poiché l'accesso ogni carattere scorre l'intero elenco collegato di blocchi da memorizzare nel buffer corretti da indicizzare trovare gravemente sulle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="9bebd-105">Performance is severely impacted because each character access walks the entire linked list of chunks to find the correct buffer to index into.</span></span>

> [!NOTE]
>  <span data-ttu-id="9bebd-106">Anche per un grande "voluminose", <xref:System.Text.StringBuilder> dell'oggetto, utilizzando il <xref:System.Text.StringBuilder.Chars%2A> proprietà per l'accesso basato su indice a uno o un numero ridotto di caratteri ha un impatto trascurabile sulle prestazioni, ma in genere, è anche un **0(n)** operazione.</span><span class="sxs-lookup"><span data-stu-id="9bebd-106">Even for a large "chunky" <xref:System.Text.StringBuilder> object, using the <xref:System.Text.StringBuilder.Chars%2A> property for index-based access to one or a small number of characters has a negligible performance impact; typically, it is an **0(n)** operation.</span></span> <span data-ttu-id="9bebd-107">L'impatto significativo sulle prestazioni si verifica quando si scorre i caratteri nel <xref:System.Text.StringBuilder> oggetto, ovvero un' **O(n^2)** operazione.</span><span class="sxs-lookup"><span data-stu-id="9bebd-107">The significant performance impact occurs when iterating the characters in the <xref:System.Text.StringBuilder> object, which is an **O(n^2)** operation.</span></span> 

<span data-ttu-id="9bebd-108">Se si verificano problemi di prestazioni quando si utilizza basati su caratteri indicizzazione con <xref:System.Text.StringBuilder> oggetti, è possibile utilizzare una delle seguenti soluzioni alternative:</span><span class="sxs-lookup"><span data-stu-id="9bebd-108">If you encounter performance issues when using character-based indexing with <xref:System.Text.StringBuilder> objects, you can use any of the following workarounds:</span></span>

- <span data-ttu-id="9bebd-109">Convertire il <xref:System.Text.StringBuilder> istanza a un <xref:System.String> chiamando il <xref:System.Text.StringBuilder.ToString%2A> (metodo), quindi accedere ai caratteri nella stringa.</span><span class="sxs-lookup"><span data-stu-id="9bebd-109">Convert the <xref:System.Text.StringBuilder> instance to a <xref:System.String> by calling the <xref:System.Text.StringBuilder.ToString%2A> method, then access the characters in the string.</span></span>

- <span data-ttu-id="9bebd-110">Copiare il contenuto dell'oggetto esistente <xref:System.Text.StringBuilder> ridimensionate preventivamente un nuovo oggetto <xref:System.Text.StringBuilder> oggetto.</span><span class="sxs-lookup"><span data-stu-id="9bebd-110">Copy the contents of the existing <xref:System.Text.StringBuilder> object to a new pre-sized <xref:System.Text.StringBuilder> object.</span></span> <span data-ttu-id="9bebd-111">Migliora le prestazioni in quanto il nuovo <xref:System.Text.StringBuilder> oggetto non è "voluminoso".</span><span class="sxs-lookup"><span data-stu-id="9bebd-111">Performance improves because the new <xref:System.Text.StringBuilder> object is not chunky.</span></span> <span data-ttu-id="9bebd-112">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="9bebd-112">For example:</span></span>

   ```csharp
   // sbOriginal is the existing StringBuilder object
   var sbNew = new StringBuilder(sbOriginal.ToString(), sbOriginal.Length);
   ```
   ```vb
   ' sbOriginal is the existing StringBuilder object
   Dim sbNew = New StringBuilder(sbOriginal.ToString(), sbOriginal.Length)
   ```
- <span data-ttu-id="9bebd-113">Impostare la capacità iniziale del <xref:System.Text.StringBuilder> oggetto su un valore che corrisponde approssimativamente alle dimensioni massime previste chiamando il <xref:System.Text.StringBuilder.%23ctor(System.Int32)> costruttore.</span><span class="sxs-lookup"><span data-stu-id="9bebd-113">Set the initial capacity of the <xref:System.Text.StringBuilder> object to a value that is approximately equal to its maximum expected size by calling the <xref:System.Text.StringBuilder.%23ctor(System.Int32)> constructor.</span></span> <span data-ttu-id="9bebd-114">Si noti che questo viene allocato l'intero blocco anche se memoria il <xref:System.Text.StringBuilder> raramente raggiunge la capacità massima.</span><span class="sxs-lookup"><span data-stu-id="9bebd-114">Note that this allocates the entire block of memory even if the <xref:System.Text.StringBuilder> rarely reaches its maximum capacity.</span></span>
